{
  "project": "Kodus Agent Readiness",
  "branchName": "ralph/kotlin-support",
  "description": "Add Kotlin language support to the agent-readiness CLI tool, including project detection, Kotlin-specific linter/formatter/test patterns, and Gradle Kotlin DSL awareness across all pillars",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add Kotlin project detection to detector",
      "description": "As a developer using Kotlin, I need the tool to detect Kotlin projects so the analysis engine knows it's a Kotlin codebase.",
      "acceptanceCriteria": [
        "Add 'kotlin' to the ProjectType union type in src/types/index.ts",
        "Add Kotlin detection to TYPE_INDICATORS in src/engine/detector.ts: detect via build.gradle.kts file",
        "Kotlin detection also checks for kotlin plugin in build.gradle (e.g. 'kotlin' or 'org.jetbrains.kotlin' in plugins block)",
        "Kotlin detection checks for kotlin-maven-plugin in pom.xml",
        "If build.gradle.kts exists, detect as 'kotlin' (not 'java')",
        "If build.gradle exists and contains kotlin plugin references, detect as 'kotlin'",
        "Multiple types can still be detected (e.g. both 'java' and 'kotlin' in same repo)",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "build.gradle.kts is the strongest Kotlin signal. Also check for src/main/kotlin/ directory as secondary indicator."
    },
    {
      "id": "US-002",
      "title": "Add Kotlin linter and formatter detection to Style & Linting pillar",
      "description": "As a Kotlin developer, I need the style-linting pillar to recognize Kotlin-specific linters (detekt) and formatters (ktlint, ktfmt).",
      "acceptanceCriteria": [
        "Linter criterion detects detekt: checks for detekt.yml, .detekt.yml, detekt-config.yml, or 'detekt' in build.gradle.kts plugins/dependencies",
        "Linter criterion detects ktlint as linter: checks for .editorconfig with ktlint rules, or 'ktlint' in build.gradle.kts",
        "Formatter criterion detects ktlint: checks for ktlint plugin in build.gradle.kts (e.g. 'ktlint' in plugins or 'org.jlleitschuh.gradle.ktlint')",
        "Formatter criterion detects ktfmt: checks for 'ktfmt' in build.gradle.kts",
        "Formatter criterion detects spotless with kotlin: checks for spotless plugin with kotlin block in build.gradle.kts",
        "Type checker criterion recognizes Kotlin's built-in type system (Kotlin is statically typed, auto-pass if project is Kotlin)",
        "Messages mention the specific Kotlin tool found (e.g. 'detekt configured' not just 'linter found')",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Kotlin is statically typed by nature, so type-checker criterion should pass automatically for Kotlin projects."
    },
    {
      "id": "US-003",
      "title": "Add Kotlin test detection to Testing pillar",
      "description": "As a Kotlin developer, I need the testing pillar to detect Kotlin test frameworks, test files, and test configurations.",
      "acceptanceCriteria": [
        "Test framework criterion detects JUnit via build.gradle.kts: checks for 'testImplementation' with 'junit', 'jupiter', or 'kotlin.test'",
        "Test framework criterion detects Kotest: checks for 'kotest' in build.gradle.kts dependencies",
        "Test framework criterion detects MockK: checks for 'mockk' in build.gradle.kts (as supporting evidence)",
        "Test files criterion globs for **/*Test.kt, **/*Tests.kt, **/*Spec.kt, and src/test/**/*.kt patterns",
        "Test files criterion ignores build/ directory in glob",
        "Test script criterion checks for 'test' task in build.gradle.kts or Makefile with gradle/gradlew test",
        "Coverage criterion detects JaCoCo: checks for 'jacoco' plugin in build.gradle.kts",
        "Coverage criterion detects Kover: checks for 'kover' or 'kotlinx-kover' in build.gradle.kts",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Kotlin tests typically live in src/test/kotlin/. JUnit 5 (Jupiter) is the most common framework."
    },
    {
      "id": "US-004",
      "title": "Add Kotlin dev environment detection to Dev Environment pillar",
      "description": "As a Kotlin developer, I need the dev environment pillar to recognize Gradle lock files, wrapper, and JVM version pinning.",
      "acceptanceCriteria": [
        "Lock file criterion detects gradle.lockfile",
        "Lock file criterion detects gradle/dependency-locks/ directory",
        "Lock file criterion detects gradle/verification-metadata.xml",
        "Setup script criterion detects gradlew (Gradle wrapper) as a setup mechanism",
        "Setup script criterion detects Makefile with gradle targets",
        "Version pinning criterion detects .sdkmanrc for JDK version",
        "Version pinning criterion detects .java-version file",
        "Version pinning criterion detects gradle.properties with kotlin version or jvm target",
        "Version pinning criterion detects .tool-versions with java entry",
        "Containerization criterion already covers Dockerfile (no change needed, just verify)",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "gradlew is very common in Kotlin projects and acts as both a lock and setup mechanism."
    },
    {
      "id": "US-005",
      "title": "Add Kotlin CI/CD patterns to CI/CD pillar",
      "description": "As a Kotlin developer, I need the CI/CD pillar to recognize Gradle-based test, lint, and build commands in CI configurations.",
      "acceptanceCriteria": [
        "CI runs tests criterion detects: gradle test, ./gradlew test, gradlew test, gradle check in CI files",
        "CI runs linters criterion detects: gradle ktlintCheck, ./gradlew ktlintCheck, gradle detekt, ./gradlew detekt in CI files",
        "CI runs linters criterion detects: gradle ktfmtCheck, ./gradlew spotlessCheck in CI files",
        "Build automated criterion detects: gradle build, ./gradlew build, gradle assemble, ./gradlew assemble in CI files",
        "Deploy criterion detects: gradle publish, ./gradlew publish, gradle deploy in CI files",
        "All patterns are case-insensitive and handle both gradle and ./gradlew variants",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Most Kotlin projects use ./gradlew (wrapper) in CI. The check task runs both tests and linters."
    },
    {
      "id": "US-006",
      "title": "Add Kotlin code health and security patterns",
      "description": "As a Kotlin developer, I need the code health and security pillars to recognize Kotlin/Gradle-specific dependency management and security tools.",
      "acceptanceCriteria": [
        "Dead code detection criterion checks for detekt's UnusedPrivateMember rule enabled (in detekt config)",
        "Dependency update automation criterion detects Gradle versions plugin: checks for 'com.github.ben-manes.versions' in build.gradle.kts",
        "Dependency update automation criterion detects gradle-versions-plugin or Renovate/Dependabot with gradle ecosystem",
        "Security scanning criterion detects OWASP dependency-check Gradle plugin in build.gradle.kts",
        "Security scanning criterion detects 'org.owasp.dependencycheck' in build.gradle.kts plugins",
        "Existing Renovate/Dependabot/Snyk checks already work for Kotlin (no change needed, verify only)",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Many security tools (Snyk, Trivy, Dependabot) already support Gradle/Kotlin without special config."
    },
    {
      "id": "US-007",
      "title": "Update README to list Kotlin as supported language",
      "description": "As a user, I need the README to mention Kotlin so I know this tool supports my project.",
      "acceptanceCriteria": [
        "README.md lists Kotlin alongside Java in the supported languages section",
        "Any mention of '5 languages' or similar count is updated to reflect Kotlin addition",
        "Kotlin-specific tools mentioned: detekt, ktlint, JaCoCo/Kover, Gradle Kotlin DSL",
        "No other content changes beyond adding Kotlin references",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Keep changes minimal - just add Kotlin references where languages are listed."
    }
  ]
}
